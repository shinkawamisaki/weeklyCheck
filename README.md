# AWSリスク週次レポート Slack通知システム

## 概要

このプロジェクトは、指定されたシェルスクリプト (`checkRisk.sh`) を週次で自動実行し、その結果をSlackに通知するサーバーレスアプリケーションです。

インフラの管理には AWS CDK (TypeScript) を使用しており、サーバーレスアーキテクチャで構築されています。

## 主な機能

*   **週次自動実行**: Amazon EventBridgeにより、毎週定時にスクリプトを自動実行します。
*   **柔軟なスクリプト実行**: AWS CodeBuildを利用し、GitHubなどにある任意のシェルススクリプトを実行できます。
*   **AIによるレポート整形**: OpenAI APIと連携し、実行結果のレポートをAIが要約・整形する機能を持ちます。（ON/OFF可能）
*   **Slack通知**: 実行結果のサマリーと、完全なレポート（Markdownファイル）をSlackに通知します。

## ファイル構成

*   `checkRisk.sh`: 実際に監査を行うシェルススクリプトのサンプルです。
*   `checkrisk-cdk/`: AWSインフラを定義・管理するCDKプロジェクトです。
    *   `lib/checkrisk-cdk-stack.ts`: インフラ定義の本体です。
    *   `lambda/`: Slack通知を行うLambda関数のソースコードです。
*   `DEPLOY_GUIDE.md`: 詳細なデプロイ手順書です。
*   `SPECIFICATION.md`: このシステムの詳細な仕様書です。

## 利用方法

詳細なセットアップとデプロイの手順については、以下のドキュメントを参照してください。

- **詳細なデプロイ手順はこちら → [デプロイガイド (DEPLOY_GUIDE.md)](DEPLOY_GUIDE.md)**

## 設計思想

本プロジェクトでは「Runner」を抽象化する設計を採用しています。

- **Runner 抽象化**: スクリプト実行部分は `IRunner` インターフェースで定義され、
  現状は `CodeBuildRunner` が標準実装です。将来的に `EcsFargateRunner` など別の実装へ切り替える際も、
  `Scheduler` や `Notifier` を修正することなく Runner の差し替えが可能です。
- **責務の分離**:  
  - Runner: 「どう実行するか」  
  - Scheduler: 「いつ実行するか」  
  - Notifier: 「どう通知するか」  
  - Storage: 「どこに保存するか」  
  といった形で責務を分離し、拡張性と保守性を高めています。
- **抽象化の利点**:  
  将来の要件変更（例: ECS基盤への移行、Step Functionsによるワークフロー化）に強く、
  コードの修正範囲を最小限に抑えられます。

このように「現状の要件に最適化しつつ、将来の拡張に備える」ことを意識した設計になっています。
